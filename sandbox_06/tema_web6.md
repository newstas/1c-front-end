# WEB-I ТЕМА 6 — JavaScript. Стуктура данных

В этом уроке мы познакомимся 
- с основами стурук в JS


# Структура данных

Структура данных (data structure) — способ представления **множества данных как связного целого**, имеющего **определённый программный интерфейс (методы доступа и манипулирования над элементами этих данных)**.


# Коллекции

Возникает необходимость в программировании описывать различные объекты, 
зачастую имеющие прототипы в реальном мире. Для хранения таких даннымх
исполшьзуют словари.

Словари представляют собой набор пар **ключ: значение**, которые 
называются **свойсвом**

В ES-2015 (известный как ES6) появились новые типы коллекций в JavaScript: Set, Map, WeakSet и WeakMap.


# Словари типа Map

Map в основном представляет собой набор пар ключ/значение. Это похоже на Dictionary в C#, Map в Java, Hash в Ruby и Dictionary в Python.

```js
var car = {
	model: "DeLorean DMC-12",
	volume: 2849,
	power: 150
};

alert(car.model)
```


## Доступ к значениям словаря

Доступ к значениям по ключу (доступа к свойствам):

- если ключ является строкой

```js
car.volume
``` 

*Ответ: `<: 2849`*

- позволяет использовать в качестве ключей не только строчки но и числа, и т. д. 

```js
car["volume"]
```

*Ответ: `<: 2849`*


## Изменение значений словаря

Можно добавлять и удалять значения в словарях:

- добаление пары *ключ/значение*

```js
car.mass = 1200;
```

*Ответ: `<: 1200`*

```js
`car`
```

*Ответ: `<: Object {model: "DeLorean DMC-12F", volume: 2849, power: 150, mass: 1230}`*

- удаление значения с помощью ключевого слова `delet`

```js
delet car.mass;
```

*Ответ: `<: Object {model: "DeLorean DMC-12F", volume: 2849, power: 150}`*

Следующие методы присутствуют в экземпляре Map:

- `clear()` – Удаляет все элементы с Map
- `delete(key)` – Удаляет указанный элемент из Map
- `forEach` – как классический цикл forEach для массива
- `get(key)` – Получает элемент для указанного ключа
- `has(key)` – Возвращает true, если коллекция содержит элемент с этим ключом
- `keys()` – Возвращает все ключи коллекции Map
- `set(key, value)` – Добавляет новый элемент в Map
- `values()` – Возвращает все значения коллекции Map
- `toString()` – Распечатывает “[object Set]”

Map также **имеет свойство** под названием `size`, которое дает нам **информацию 
о количестве ключей/значений внутри коллекции**.


## Итерирование словаря - конструкция `for...in`

Перебираем ключи словаря с помощью конструкция `for...in`

```js
var key;
for(key in car) {
	console.log(key + ": " + car[key]);
}
```

*Ответ: `<: 	model: "DeLorean DMC-12" 	<: volume: 2849 	<: power: 150`*


***

# Объект

Класс Object представляет собой один из типов данных в JavaScript . Он используется для хранения **различных коллекций с ключами и более сложных объектов**. 

Объекты можно создавать с помощью `Object()`конструктора, Object.create() или **синтаксиса инициализатора/литерала объекта**.


# Массивы `Array`

Для **хранения упорядоченных коллекций** существует особая структура данных, которая называется массив, `Array`

**Массив - коллекциями элементов, упорядоченных по индексу**

`Array` объект

Массив представляется собой упорядоченный набор значений, к которому вы ссылаетесь по имени и индексу. Допустим, у вас есть массив с именем `emp`, содержащий *имена сотрудников* и упорядоченный по номеру сотрудников. Следовательно, `emp[1]` будет представлять собой *имя сотрудника номер один*, `emp[2]` - *имя сотрудника номер два*, и т.д.

```js
var color = [ "green", "blue", "red" ];

color[0]
```


## Объявление массива

Существует **два варианта синтаксиса** для **создания пустого массива**:

```js
let arr = new Array(); // создание массива с помощью конструктора Array()
let arr = []; // литеральная запись массива
```

Практически всегда используется второй вариант синтаксиса. В скобках мы можем указать начальные значения элементов:

```js
let fruits = ["Яблоко", "Апельсин", "Слива"];
```

Элементы массива нумеруются, начиная с нуля.

Синтаксис с использованием квадратных скобок называется **литерал массива** (**array literal**) 
или **инициализатор массива**.

> Такая запись короче, чем другие способы создания массива, и, как правило, более предпочтительна.


## Внутреннее устройство массива

Массив – это особый подвид объектов. Квадратные скобки, используемые для того, чтобы получить доступ к свойству `arr[0]` – это по сути обычный синтаксис доступа по ключу, как `obj[key]`, где в роли `obj` у нас `arr`, а **в качестве ключа – числовой индекс**.

Массивы расширяют объекты, так как предусматривают специальные методы для работы с упорядоченными коллекциями данных, а также свойство `length`. Но в основе всё равно лежит объект.

Следует помнить, что в JavaScript существует 8 основных типов данных. Массив является объектом и, следовательно, ведёт себя как объект.


## Многомерные массивы

Массивы могут содержать элементы, которые тоже являются массивами. Это можно использовать для создания многомерных массивов, например, для хранения матриц:

```js
let matrix = [
  [1, 2, 3],
  [4, 5, 6],
  [7, 8, 9]
];
```
где:

```js
alert( matrix[1][1] ); // 5, центральный элемент
```


# Задание

## Event.target

Свойство `target` интерфейса `Event` является ссылкой на объект, который был инициатором события.

## .index()

Возвращает индекс заданного элемента

***



# ТЕОРИЯ: Ассоциативные массивы

**Ассоциативный массив** – это массив, в котором обращение к значению осуществляется по ключу.

В JavaScript имеются **обычные массивы**, которые **создаются с использованием квадратных скобок** или **конструктора `Array()`**. В таких массивах в качестве ключа выступает порядковый номер элемента.

**Создание ассоциативного массива** в JavaScript можно выполнить 2 разными способами:

- с помощью **объекта Map** (появился начиная с версии ECMAScript 2015);
- посредством **объектов**.
 


# Словари - тип Map 

Часто термин **словарь** отождествляется с теримином **объект**

Map в отличие от объекта позволяет использовать в качестве ключей значения любых типов как примитивные, так и ссылочные.

Создание пустой коллекции:

```js
// создание пустого ассоциативного массива
const arr = new Map();
```

Создании коллекции с инициализацией начальных значений:

```js
// создание ассоциативного массива и помещения в него трех пар «ключ-значение»
const arr = new Map([
  ['key1', 'value1'],
  ['key2', 'value2'],
  ['key3', 'value3']
]);
```

**Map - реализация простого ассоциативного массива (словаря)**. 

Он содержит **данные в виде набора пар ключ/значение(ключи уникальны)** и предоставляет **методы для доступа и манипулирования этими данными**.  

Также как и объект, словарь позволяет:

- получать значение  по ключу, а также проверять наличие ключа
- добавлять/удалять пары ключ/значение
- перезаписывать значение по ключу (ключи уникальны)
- итерироваться по ключам

Словари, как специализированная структура данных, имеют существенные преимущества по сравнению с объектами:

- Ключи словаря могут быть любого типа (а не только строки).
- Словарь хранит свой размер (не надо вычислять).
- Натуральный порядок обхода элементов ( в порядке добавления) с помощью for...of.
- Словарь не подмешивает ключи из прототипа (в отличие от объекта).


# Объект как ассоциативный массив

В качестве ассоциативного массива можно использовать обычный объект.


## Инициализация объектов

Объекты могут быть инициализированы с помощью `new Object()`, `Object.create()` или **литеральной (инициирующей) нотации**. Инициализатор объекта это разделенный запятыми список ноль или более пар имен свойств и ассоциируемых с ними значений, заключенных в фигурные скобки `{}`.

Создание пустого ассоциативного массива через объект:

```jd
// посредством литерала объекта
const arr1 = {};
// с использованием стандартной функции-конструктора Object
const arr2 = new Object();
// через Object.create
const arr3 = new Object.create(null);
```

Заполнение ассоциативный массив значениями на этапе его создания:

```js
const myArray = {
  'key1': 'value1',
  'key2': 'value2',
  ...
}
```

Добавление нового элемента (пары «ключ-значение»):

```js
// добавим строку «текстовое значение» с ключом «key1»
arr['key1'] = 'текстовое значение';
// добавить число 22 с ключом «key2»
arr['key2'] = 22;
```

Добавление нового элемента будет выполняться только в том случае, если данного ключа в нём нет. Если данный ключ уже существует, то указанное значение просто изменит существующее.

В качестве значения можно использовать не только примитивные типы данных, но и ссылочные.

В JavaScript для обращения к ключу можно использовать не только квадратные скобки, но и выполнять это через точку. Но это доступно только для ключей, имена которых отвечают правилам именования переменных.

```js
arr.key1 = 'текстовое значение';
arr.key2 = 22;
```


# Коллекции типа Set 

**Set** реализация коллекции - структура данных, которая содержит список уникальных элементов в порядке их добавления. 

**Set** – коллекция для хранения множества значений, причём каждое значение может встречаться лишь один раз.

Эта коллекция похожа на **HashSet** в мире **C#**, **Set/HashSet** в **Java** и **Set** в **Python**.

**Set** имеет очень полезное свойство под названием `size`, которое дает нам информацию о количестве значений внутри коллекции.

Наиболее важные методы, присутствующие в экземпляре Set:

- `add(element)` – Добавляет новый элемент в Set
- `clear()` – Удаляет все элементы из Set
- `delete(element)` – Удаляет указанный элемент из Set
- `forEach` – Это как классический цикл forEach для массива
- `has(value)` – Возвращает true, если коллекция содержит данный элемент.
- `toString()` – Распечатывает “[object Set]”
- `values()` – Возвращает все значения коллекции Set
- `keys()` – То же, что и values(). Это псевдоним для метода values(). Единственная причина, по которой он существует, — иметь единый интерфейс для новых типов коллекций в JavaScript.



# ТЕОРИЯ: Array.prototype


## Вызов конструктора Array как функции 

При вызове `Array` не в качестве конструктора, а в качестве функции, создается и инициализируется новый объект `Array`. Таким образом, вызов функции `Array(…)` эквивалентен выражению для создания объекта `new Array(…)` с теми же аргументами.

## Конструктор Array

Если `Array` вызывается как часть выражения `new`, он является конструктором, так как он инициализирует создаваемый объект.

`Array` - функция конструктор которая нужна для создания массивов.
`Array.prototype` - объект прототип, с набором методов, нужен для реализации прототипного наследования, к тому же имеется исключительно у функций, по умолчанию там храниться поле `constructor`, которое хранит ссылку на класс который создал этот объект.

При создании объекта через оператор `new` в том числе и массива, объекту присваивается. `__proto__ = Array.prototype`. `__proto__`, это и есть сам прототип, объект хранилище методов, в нем ищется поле когда не находиться у самого объекта.

> Когда вы проверяете свойство объекта, то сначала оно ищется в самом объекте, и если его нет, то в прототипе. В самом объекте хранятся только его собственные свойства. А в прототипе хранятся свойства всех объектов данного класса.


***


`Array` |əˈreɪ| - массив, поле, матрица, строй, боевой порядок, войско


[Работа с объектами- MDN](https://developer.mozilla.org/ru/docs/Web/JavaScript/Guide/Working_with_Objects)

[Массивы](https://learn.javascript.ru/array)

[Упорядоченные наборы данных](https://developer.mozilla.org/ru/docs/Web/JavaScript/Guide/Indexed_collections)

[Коллекции](https://developer.mozilla.org/ru/docs/Web/JavaScript/Guide/Keyed_collections)

[for...in](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Statements/for...in)

[Объекты: перебор свойств](https://learn.javascript.ru/object-for-in)

[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)

[Ассоциативные массивы в JavaScript](https://itchief.ru/javascript/associative-arrays)
