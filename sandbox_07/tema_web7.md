# WEB-I ТЕМА 7 — jQuery

На этом занятии:

- приступим к изучению языка JQuery:
  - научимся **подключать** JQuery
  - изчим **синтаксис** JQuery
  
- изучим **фукциональность** JQuery, фукции:
  - `.on()` (события)
  - `.hide()`, `.show()`, `.toggle()`
  - `.html()` и `.attr()`
  - `.append()` и `.prepend()`
  - `.css()`
  - `.width()` и `.height()`
  - `.addClass()`, `.removeClass` и `.toggleClass`
  - `.parent`, `.children`  и `.siblings`


## Практическое задание:

- **Головоломка** - реализовать по изображениюю (при наведении полоски должны менять цвет)

- **Список дел: функциональность** - форма для создания списка дел на JQuery


# Что такое jQuery?

**jQuery** - это **легкая библиотека JavaScript**, «пиши меньше, делай больше».

Цель jQuery - упростить использование JavaScript на вашем веб-сайте.

jQuery берет на себя множество общих задач, для выполнения которых **требуется 
много строк кода JavaScript, и превращает их в методы, которые можно вызывать 
с помощью одной строки кода**.

jQuery также упрощает многие сложные вещи из JavaScript, такие как **вызовы AJAX** 
и **манипуляции с DOM**.

**Цель jQuery** - упростить использование JavaScript на вашем веб-сайте.

```js
$(селектор).действие()
```


# Возможности

Библиотека jQuery содержит следующие функции:

- Переход по дереву DOM
- События
- Визуальные эффекты
- AJAX-дополнения
- JavaScript-плагины


# Синтаксис

С помощью jQuery вы **выбираете (запрашиваете) элементы HTML** и **выполняете 
с ними «действия**».

Синтаксис jQuery специально разработан для выбора элементов HTML и выполнения 
некоторых действий с элементом (ами).


## Базовый синтаксис: 

```js
$(селектор).действие();
```

где:

- Знак `$` - служит для **определения / доступа к jQuery** 
(**`$()` - это функция**)
- `(селектор)` - для **запроса (или поиска) HTML-элементов**
- `действие()` - **jQuery-действие выполняемое над элементами**

*Примеры:*

```js
$(this).hide() // скрывает текущий элементам
$("p").hide() // скрывает все элементы `<p>
$(".test").hide() // срывает все элементы класса test (class="test")
$("#test").hide() // скрывает элемент по id (id="test")
```

## Несколько действий

```js
$(селектор).действие-1().действие-2();
```
Несколько действий можно связать в цепочку


## Лаконичность синтаксиса jQuery - `$()`

Благодаря **функции `$()`** работа с элементами DOM-дерева занимала всего несколько 
строчек. Вам не нужно было инициировать объект для хранения выбранного элемента, 
делать циклы по объекту и привязывать события к каждому элементу в объекте. 
**Вы могли просто выбирать элементы DOM и привязывать их к любому количеству 
методов**. И это занимает всего несколько строк. Просто не верится, что этот 
функционал был в jQuery прямо с первой версии.

**jQuery использует синтаксис CSS для выбора элементов**.


# Джон Резиг - автор jQuery

HTML был одной из первых вещей, которую Джон Резиг освоил, когда он только 
начал заниматься программированием. Но страсть к JavaScript пришла значительно 
позже, примерно в 2004 году. Изучив новый язык, пришёл к выводам, 
что **JavaScript — это простой, но изящный язык, который является невероятно 
мощным для решения многих задач**. В течение следующей пары лет Джон создал 
множество различных JavaScript-приложений, прежде чем закончить создание jQuery. 

**Основной целью создания jQuery Резиг видел возможность закодировать 
многоразово используемые куски кода, которые позволят упростить JavaScript 
и использовать их так, чтобы не беспокоиться о кросс-браузерных вопросах**. 

Библиотека была представлена общественности на компьютерной **конференции 
«BarCamp» в Нью-Йорке в 2006 году**.

После jQuery последовали дгугие успешные Open source проекты — **Bootstrap**, 
**WordPress**, **Sass**, **Chrome** (в котором даже есть встроенные инструменты 
разработчика) — их объединяет идея упростить жизнь разработчика.

До этих проектов на написание хорошей документации не обращали внимания,
считалось: **«Ты ж программист. Разберешься.»**


# Философия

Точно так же, как CSS отделяет визуализацию от структуры HTML, **JQuery отделяет 
поведение от структуры HTML**. 

*Например: вместо прямого указания на обработчик события нажатия кнопки 
управление передаётся JQuery, которая идентифицирует кнопки и затем преобразует 
его в обработчик события клика. Такое разделение поведения и структуры 
также называется принципом ненавязчивого JavaScript*.

Библиотека jQuery содержит функциональность, полезную для максимально широкого 
круга задач. Тем не менее, разработчиками библиотеки не ставилась задача 
совмещения в jQuery функций, которые подошли бы всюду, поскольку это привело бы 
к большому коду, бо́льшая часть которого не востребована.


# Подключение jQuery

jQuery от Google:

Многие пользователи уже загрузили jQuery от Google при посещении другого сайта. 
В результате он будет загружен из кеша при посещении вашего сайта, что приведет 
к сокращению времени загрузки


# Методы jQuery

- `jQuery()` - `$()` - **Функция jQuery()** является, пожалуй основной функцией в библиотеке. Она обычно, вызывается намного чаще других и поэтому для нее существует короткая форма записи — `$()`. Функция jQuery() позволяет производить поиск элементов на странице, создавать новые элементы по заданному HTML тексту, а так же кое что еще. **Возвращает объект jQuery**

- `.on()` - устанавливает обработчики событий на выбранные элементы страницы

- `.hide()` - с помощью этой функции можно плавно показывать и скрывать выбранные элементы на странице, за счет изменения размера и прозрачности

- `.show()` - с помощью этой функции можно плавно показывать и скрывать выбранные элементы на странице, за счет изменения размера и прозрачности

- `.toggle()` - показывает или скрывает элементы в наборе объекта jQuery

- `.html()` - возвращает или изменяет html-содержимое выбранных элементов страницы.

- `.attr()` - возвращает или изменяет значение атрибутов у выбранных элементов страницы. Функция имеет четыре варианта использования.

- `.append()` - вставляет содержимое, заданное параметром, в конец каждого элемента в наборе соответствующих элементов

- `.prepend()` - функция добавляет содержимое в начало определенных элементов

- `.css()` - возвращает или изменяет значения css-величин у выбранных элементов страницы

- `.width()` - функция возвращает ширину элемента. Кроме этого, с помощью width(), можно установить новое значение ширины

- `.height()` - функция возвращает высоту элемента. Кроме этого, с помощью height(), можно установить новое значение высоты

- `.addClass()` - добавляет класс(ы) выбранным элементам страницы. Если из этих элементов некоторые уже принадлежат каким-то классам, то новый (новые) класс добавится к существующим, а не заменит их

- `.removeClass()` - удаляет заданные классы у элементов на странице

- `.toggleClass()` - добавляет или удаляет заданный класс(ы) по принципу переключателя (добавляет, если элемент не содержит класса, и удаляет, если класс есть)

- `.parent()` - осуществляет поиск родительских элементов всех заданных элементов

- `.children()` - находит дочерние элементы

- `.siblings()` - осуществляет поиск элементов, являющихся соседними для выбранных элементов (под соседними понимаются элементы, которые имеют общего родителя). При этом, сами выбранные элементы в результат не включаются

- `.mouseenter()` - устанавливает обработчик появления курсора над элементом, либо, запускает это событие.


# События

jQuery адаптирован для реагирования на события на HTML-странице.


## Что такое события?

Все действия посетителей, на которые может реагировать веб-страница, называются событиями.

**Событие** представляет собой **точный момент, когда что-то происходит**.

*Примеры:*

- перемещение курсора мыши над элементом
- выбор переключателя
- щелчок по элементу


Некоторые общие события DOM:

События Мыши |	События клавиатуры	| События формы	| Document/Window события
---     | --- | --- | ---
click | keypress | submit | load
dblclick | keydown | change | resize
mouseenter | keyup | focus | scroll
mouseleave |       | blur | unload


## Синтаксис jQuery для методов событий

В jQuery у большинства **событий DOM** есть **эквивалентный метод jQuery**.

Чтобы назначить событие щелчка для всех абзацев на странице, вы можете сделать это:

```js
$("p").click();
```

Следующий шаг - определить, что должно произойти при возникновении события. Вы должны передать событию функцию:

```js
$("p").click(function(){
  // action goes here!!
}); 
```

## Метод `click()`

Метод `click()` присоединяет функцию обработчика событий к элементу HTML.

Функция выполняется, когда пользователь щелкает элемент HTML.

В следующем примере говорится: Когда событие щелчка запускается на элементе 
`<p>`; скрыть текущий элемент `<p>`:

```js
$("p").click(function(){
  $(this).hide();
});
```


## Функция `.on`

Функция `on` похожа на фукцию `addEvenListener` - добавляет обработчик события
выбранным элементам

```js
$("p").on("mouseenter", function() {
	alert("Привет");
```

jQuery метод `mouseenter()` привязывает JavaScript обработчик событий 
**mouseenter** (срабатывает, когда указатель мыши заходит на элемент), 
или запускает это событие на выбранный элемент.

Метод `on()` присоединяет один или **несколько обработчиков событий** для выбранных элементов. 

Присоедините несколько обработчиков событий к элементу `<p>`:

```js
$("p").on({
  mouseenter: function(){
    $(this).css("background-color", "lightgray");
  },
  mouseleave: function(){
    $(this).css("background-color", "lightblue");
  },
  click: function(){
    $(this).css("background-color", "yellow");
  }
}); 
```

# Разбираем задание Список дел 

```html
<body>
    <div>
        <ol id="list"></ol> <!-- нумерованный список -->
        <input type="text" id="field"> <!--  поле ввода -->
    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script>
        $("#field").on("keydown", function(event) { // подключаем обработчик события для поля ввода по id field
            var item;
            if (event.which == 13) { // условие для сравнения нажатой клавиши Enter (код 13)
                item = $("<li></li>"); // создаем элемент списка ol и присваиваем переменной item
                item.html($(this).val()); // сохраняем в переменной item значение поля input в формает html
                $(this).val(" "); // очищаем поле input, присваиваем пустое значение
                item.on("click", function() { // подключаем обработчик события для очистки элеметов li списка ol
                    $(this).remove(); // удаляем элемент списка ol при нажатии кнопки мыши
                });
                $("#list").append(item); // вставляет содержимое, заданное параметром item, в конец последнего элемента ol по id list
            }
        });
    </script>
</body>
```

## Свойство `event.which`

`event.which` - свойство `which` объекта `event` используется для определения, 
какие клавиши клавиатуры или мыши были использованы (для клавиатуры стандартный 
числовой код; для мыши: 1 левый клик, 2 клик колёсиком, 3 правый клик) which - 
*перевод* какой


## Тег `<li>`

HTML-элемент `<li>` используется для создания элементов списка. Он также должен 
находиться в родительском элементе: упорядоченном списке `<ol>`, 
неупорядоченном списке `<ul>`, или меню `<menu>`.


## Метод `.html()`

`.html()` - возвращает или изменяет html-содержимое выбранных элементов страницы.


## Метод `.val()`

`.val()` - метод позволяет получать и изменять значения элементов форм. **Для 
элементов `input` это значение атрибута `value`**;
для списков выбора `select` – значение `value` выбранного элемента (в случае 
множественного выбора – массив значений); в случае с `textarea`, метод `.val()` 
будет работать непосредственно с содержимым тега `textarea`.


## Атрибут value

Атрибут `value` задает значение по умолчанию для поля ввода HTML формы. 
Оно будет автоматически вставлено в него при заходе на страницу. 

Атрибут `value` для текстовых полей `input type="password | text"` указывает 
предварительно введенную строку. Пользователь может стирать текст и вводить 
свои символы, но при использовании в форме кнопки **Reset** пользовательский 
текст очищается и восстанавливается введенный в атрибуте `value`;


## Метод `.append()`

`.append()` - вставляет содержимое, заданное параметром, в конец каждого элемента 
в наборе соответствующих элементов


***

# ТЕОРИЯ: Почему $, а не что-то ещё?

**Библиотека jQuery** предоставляет функцию jQuery, которая позволяет вам выбирать 
элементы с помощью селекторов CSS.

```js
var listItems = jQuery( 'li' );
```

Конечно, если вы уже видели любой jQuery-код, то, вероятно, больше привыкли 
к чему-то вроде этого:

```js
var listItems = $( 'li' );
```

Как обсуждалось в разделе Основы JavaScript, корректные имена в JavaScript могут быть 
достаточно произвольны, если только они не начинаются с цифры и не включают в себя 
дефис. Таким образом, $ в коде просто более короткое и удобное имя для функции jQuery. 
На деле в конце исходного кода jQuery вы найдёте:

```js
window.jQuery = window.$ = jQuery;
```

При **вызове функции `$()`** и передаче в неё селектора вы **создаёте новый объект jQuery**. 
Конечно, в JavaScript функции тоже объекты, это означает что у `$` (и jQuery, естественно) 
также есть **свойства и методы**. Например, вы можете обратиться к **свойству `$.support`** 
за информацией о том, **что поддерживает текущий браузе**р, а с помощью **метода `$.ajax`
 сделать запрос через AJAX**.

*Обратите внимание, что если ваша страница содержит более одной библиотеки JavaScript, 
то `$` может применяться другой библиотекой и это может привести к тому, что jQuery 
перестанет работать. Если вы столкнулись с подобным, то должны рассмотреть 
использование `jQuery.noConflict` перед загрузкой других библиотек.
	

***


## Источники 

[jQuery CDN](https://releases.jquery.com/)

[Русская документация по API jQuery](https://jquery-docs.ru/)

[Учебное пособие по jQuery - w3schools](https://www.w3schools.com/jquery/default.asp)

[jQuery события](https://basicweb.ru/jquery/jquery_events.php)

[Азы jQuery - WebReference](https://webref.ru/dev/jqfundamentals/jquery-basics)

[Методы событий jQuery - rulangschools.com](https://ru.langschools.com/jquery/jquery-events.php)

[Простой учебник jQuery](http://gearmobile.github.io/tags/#jquery)

[Метод siblings библиотеки jQuery](http://gearmobile.github.io/jquery/siblings-jquery/)
